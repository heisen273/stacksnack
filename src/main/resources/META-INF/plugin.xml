<idea-plugin>
    <id>com.stackframehider</id>
    <name>StackSnack - Library Stack Frame Hider</name>
    <vendor url="https://github.com/heisen273/IntelliJ-Library-Stack-Frame-Hider/tree/main">Library Stack Frame Hider</vendor>

    <description><![CDATA[
    <h2>StackSnack</h2>
    <p>
        <b>StackSnack</b> helps you cut through the noise in your debugger by hiding library stack frames.
    </p>
    <p>
    This keeps your focus on <i>your</i> code, making debugging sessions faster and easier to digest.
    </p>
    <h3>隐藏库中的帧</h3>
    <p>这款插件可以在调试器中<b>隐藏第三方库的堆栈帧</b>，让你更专注于自己的代码逻辑。</p>

    <h3>Usage</h3>
    <p>
        <img src="https://raw.githubusercontent.com/heisen273/IntelliJ-Library-Stack-Frame-Hider/refs/heads/main/assets/preview.gif" alt="Usage demo"/>
    </p>
    <p>
        If the button is missing:
        <ol>
            <li>Right-click the <i>Debug Tools</i> toolbar</li>
            <li>Select <b>Add</b> → Search for <b>'Frames'</b></li>
            <li>Add the <b>'Hide Library Stack Frames'</b> button</li>
        </ol>
        <img src="https://raw.githubusercontent.com/heisen273/IntelliJ-Library-Stack-Frame-Hider/refs/heads/main/assets/usage.gif" alt="Adding button demo"/>
    </p>

    <h3>Why use it?</h3>
    <ul>
        <li>Quickly hide clutter from library/framework stack frames</li>
        <li>Stay focused on your own code paths</li>
        <li>Works seamlessly across JetBrains IDEs (PyCharm, GoLand, WebStorm, etc.)</li>
    </ul>

    ]]></description>


    <change-notes><![CDATA[
        <ul>
            <li>Added settings page for customizing library patterns</li>
            <li>Added right-click action to hide frames from specific libraries</li>
            <li>Improved pattern matching with user-configurable patterns</li>
            <li>Performance improvements & bug fixes</li>
        </ul>
    ]]></change-notes>

    <!-- Plugin dependencies -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.xdebugger</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Startup activity to automatically handle debug sessions -->
        <postStartupActivity implementation="com.stackframehider.DebugSessionStartupActivity"/>

        <!-- Settings service -->
        <applicationService serviceImplementation="com.stackframehider.settings.StackFrameHiderSettings"/>

        <!-- Settings page -->
        <applicationConfigurable
            parentId="tools"
            instance="com.stackframehider.settings.StackFrameHiderConfigurable"
            id="com.stackframehider.settings.StackFrameHiderConfigurable"
            displayName="StackSnack"/>
    </extensions>

    <actions>
        <action id="HideLibraryStackFrames"
                class="com.stackframehider.actions.ToggleStackFrameHiderAction"
                icon="/icons/ideIcon.svg"
                text="Hide Library Stack Frames"
                description="Hide library stack frames in debugger">
            <add-to-group group-id="XDebugger.ToolWindow.TopToolbar" anchor="last"/>
        </action>

        <action id="HideLibraryFromFrame"
                class="com.stackframehider.actions.HideFrameFromLibraryAction"
                icon="/icons/ideIcon.svg"
                text="Hide Frames from This Library"
                description="Add this library to the hide list">
            <add-to-group group-id="XDebugger.Frames.Tree.Popup" anchor="last"/>
        </action>
    </actions>
</idea-plugin>