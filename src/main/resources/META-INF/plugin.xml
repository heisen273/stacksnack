<idea-plugin>
    <id>com.stackframehider</id>
    <name>StackSnack - Library Stack Frame Hider</name>
    <vendor url="https://github.com/heisen273/IntelliJ-Library-Stack-Frame-Hider/tree/main">Library Stack Frame Hider</vendor>

    <description><![CDATA[
    <h2>StackSnack – 隐藏库中的帧</h2>
    <p>
        <b>StackSnack</b> helps you cut through the noise in your debugger by hiding library stack frames.
    </p>
    <p>
    This keeps your focus on <i>your</i> code, making debugging sessions faster and easier to digest.
    </p>
    <p>这款插件可以在调试器中<b>隐藏第三方库的堆栈帧</b>，让你更专注于自己的代码逻辑。</p>

    <h3>Usage</h3>
    <p>
        <img src="https://raw.githubusercontent.com/heisen273/IntelliJ-Library-Stack-Frame-Hider/refs/heads/main/assets/preview.gif" alt="Usage demo"/>
    </p>
    <p>
        If the button is missing:
        <ol>
            <li>Right-click the <i>Debug Tools</i> toolbar</li>
            <li>Select <b>Add</b> → Search for <b>'Frames'</b></li>
            <li>Add the <b>'Hide Library Stack Frames'</b> button</li>
        </ol>
        <img src="https://raw.githubusercontent.com/heisen273/IntelliJ-Library-Stack-Frame-Hider/refs/heads/main/assets/usage.gif" alt="Adding button demo"/>
    </p>

    <h3>Why use it?</h3>
    <ul>
        <li>Quickly hide clutter from library/framework stack frames</li>
        <li>Stay focused on your own code paths</li>
        <li>Works seamlessly across JetBrains IDEs (PyCharm, GoLand, WebStorm, etc.)</li>
    </ul>

    ]]></description>


    <change-notes><![CDATA[
        <ul>
            <li>Highlight styling improved</li>
            <li>Performance improvements</li>
            <li>Minor bug fixes</li>
        </ul>
    ]]></change-notes>

    <!-- Plugin dependencies -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.xdebugger</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Startup activity to automatically handle debug sessions -->
        <postStartupActivity implementation="com.stackframehider.DebugSessionStartupActivity"/>

        <!-- Settings service -->
        <applicationService serviceImplementation="com.stackframehider.StackFrameHiderSettings"/>

        <!-- Project-level service for debug session handling -->
<!--        <projectService serviceImplementation="com.stackframehider.DebugSessionListener"/>-->
    </extensions>

    <actions>
        <action id="HideLibraryStackFrames"
                class="com.stackframehider.StackFrameHiderAction"
                icon="/icons/ideIcon.svg"
                text="Hide Library Stack Frames"
                description="Hide library stack frames in debugger">
        <add-to-group group-id="XDebugger.ToolWindow.TopToolbar" anchor="last"/>
        </action>
    </actions>
</idea-plugin>